@using ApotekaShop.Web.Helpers
@model ApotekaShop.Web.Models.OrderViewModel

@{
    ViewBag.Title = "Orders";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Orders</h1>
    @using (Html.BeginForm("Details", "Order", FormMethod.Post))
    {
        if (Model.OrderItems.Any())
        {
            for (var i = 0; i < Model.OrderItems.Count(); i++)
            {
                <div class="row">
                    @Html.HiddenFor(model => model.OrderItems[i].Id)
                    @Html.HiddenFor(model => model.OrderItems[i].Name)
                    @Html.HiddenFor(model => model.OrderItems[i].PricePerUnit)
                    <div class="col-md-4">
                        <img src="http://placehold.it/150x150" alt="">
                    </div>
                    <div class="col-md-4">
                        <div class="caption">
                            <a href="@Url.Action("Details", "ProductDetails", new {id = Model.OrderItems[i].Id})">
                                <h3>@Model.OrderItems[i].Name</h3>
                            </a>
                        </div>
                        @Html.TextBoxFor(model => model.OrderItems[i].Count, new {type = "number", onchange = "this.form.submit();"})
                    </div>
                    <div class="col-md-4">
                        <p>@Model.OrderItems[i].Count x @Html.Currency(Model.OrderItems[i].PricePerUnit)</p>
                        <p>@Html.Currency(Model.OrderItems[i].PricePerUnit * Model.OrderItems[i].Count)</p>
                    </div>
                </div>
            }
        }
    }
@section Scripts
{
    <script>
        OrderModule.initializeAddToOrderButtons();
    </script>
}